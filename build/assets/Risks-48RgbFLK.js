import{c as D,r as h,j as e,T as N}from"./index-DKFEh9ub.js";import{F as I}from"./funnel-C2Ksk9OF.js";import{M as v}from"./mail-BGp9wR0N.js";/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],B=D("check",_);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],U=D("copy",z);function K({projects:g,setProjects:k,focalPoints:f,isDarkMode:q}){const[b,w]=h.useState("all"),[u,S]=h.useState("all"),[m,p]=h.useState([]),[C,j]=h.useState(!1),[r,T]=h.useState({subject:"",body:"",recipients:[]}),[P,y]=h.useState(!1),E=Array.from(new Set(g.map(s=>s.sector))),$=Array.from(new Set(g.map(s=>s.department))),n=g.filter(s=>{const t=new Date(s.expectedSubmissionDate)<new Date&&!s.isSubmitted,a=b==="all"||s.sector===b,i=u==="all"||s.department===u;return t&&a&&i}),M=s=>{p(t=>t.includes(s)?t.filter(a=>a!==s):[...t,s]),j(!1)},A=()=>{m.length===n.length?p([]):p(n.map(s=>s.id)),j(!1)},F=s=>{k(g.map(t=>t.id===s?{...t,isSubmitted:!0,submittedDate:new Date().toISOString().split("T")[0]}:t))},O=()=>{if(m.length===0){alert("Please select at least one project");return}const s=g.filter(c=>m.includes(c.id)),t=new Map;s.forEach(c=>{f.filter(d=>d.sector===c.sector&&d.department===c.department).forEach(d=>{t.set(d.id,d)})});const a=Array.from(t.values());if(a.length===0){alert("No focal points found for the selected projects. Please add focal points with matching sectors and departments.");return}const i=new Map;s.forEach(c=>{const x=`${c.sector} - ${c.department}`;i.has(x)||i.set(x,[]),i.get(x).push(c)});const o=`Reminder: Overdue Project Submissions - ${new Date().toLocaleDateString()}`;let l=`Dear Team,

This is a friendly reminder regarding the following project(s) that were expected to be submitted but have not been received yet:

`;i.forEach((c,x)=>{l+=`${x}:
`,c.forEach(d=>{const L=Math.floor((new Date().getTime()-new Date(d.expectedSubmissionDate).getTime())/864e5);l+=`  â€¢ ${d.name}
`,l+=`    Expected Submission Date: ${new Date(d.expectedSubmissionDate).toLocaleDateString()}
`,l+=`    Days Overdue: ${L}
`,l+=`    Description: ${d.description}

`})}),l+=`Please provide an update on the status of these project(s) at your earliest convenience.

`,l+=`If you have already submitted these projects, please disregard this reminder and confirm the submission date.

`,l+=`Thank you for your cooperation.

`,l+=`Best regards,
`,l+="Project Management Team",T({subject:o,body:l,recipients:a}),j(!0),y(!1)},R=()=>{const s=`To: ${r.recipients.map(t=>t.email).join("; ")}

Subject: ${r.subject}

${r.body}`;navigator.clipboard.writeText(s),y(!0),setTimeout(()=>y(!1),2e3)},G=()=>{const t=`mailto:${r.recipients.map(a=>a.email).join(",")}?subject=${encodeURIComponent(r.subject)}&body=${encodeURIComponent(r.body)}`;window.location.href=t};return e.jsxs("div",{className:"p-8",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-gray-900 mb-2",children:"Risks - Overdue Project Submissions"}),e.jsx("p",{className:"text-gray-600",children:"Track projects that were expected to be submitted but have not been received"})]}),e.jsx("div",{className:"bg-white p-4 rounded-lg border border-gray-200 mb-6",children:e.jsxs("div",{className:"flex items-center gap-4 flex-wrap",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(I,{className:"w-5 h-5 text-gray-600"}),e.jsx("span",{className:"text-gray-700",children:"Filters:"})]}),e.jsxs("select",{value:b,onChange:s=>w(s.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"all",children:"All Sectors"}),E.map(s=>e.jsx("option",{value:s,children:s},s))]}),e.jsxs("select",{value:u,onChange:s=>S(s.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"all",children:"All Departments"}),$.map(s=>e.jsx("option",{value:s,children:s},s))]}),(b!=="all"||u!=="all")&&e.jsx("button",{onClick:()=>{w("all"),S("all")},className:"text-blue-600 hover:text-blue-700 text-sm",children:"Clear filters"})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-6",children:[e.jsxs("div",{className:"bg-red-50 border border-red-200 p-6 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx(N,{className:"w-6 h-6 text-red-600"}),e.jsx("h3",{className:"text-gray-900",children:"Overdue Projects"})]}),e.jsx("div",{className:"text-3xl text-red-600",children:n.length}),e.jsx("div",{className:"text-sm text-gray-600 mt-1",children:"Projects past expected submission date"})]}),e.jsxs("div",{className:"bg-blue-50 border border-blue-200 p-6 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx(v,{className:"w-6 h-6 text-blue-600"}),e.jsx("h3",{className:"text-gray-900",children:"Selected"})]}),e.jsx("div",{className:"text-3xl text-blue-600",children:m.length}),e.jsx("div",{className:"text-sm text-gray-600 mt-1",children:"Projects selected for reminder"})]}),e.jsxs("div",{className:"bg-purple-50 border border-purple-200 p-6 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx(N,{className:"w-6 h-6 text-purple-600"}),e.jsx("h3",{className:"text-gray-900",children:"Average Days Overdue"})]}),e.jsx("div",{className:"text-3xl text-purple-600",children:n.length>0?Math.round(n.reduce((s,t)=>{const a=Math.floor((new Date().getTime()-new Date(t.expectedSubmissionDate).getTime())/864e5);return s+a},0)/n.length):0}),e.jsx("div",{className:"text-sm text-gray-600 mt-1",children:"Days past expected date"})]})]}),n.length>0&&e.jsx("div",{className:"bg-white p-4 rounded-lg border border-gray-200 mb-6",children:e.jsxs("div",{className:"flex items-center gap-4 flex-wrap",children:[e.jsx("button",{onClick:A,className:"px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:m.length===n.length?"Deselect All":"Select All"}),e.jsx("button",{onClick:O,disabled:m.length===0,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors disabled:bg-gray-300 disabled:cursor-not-allowed",children:"Generate Reminder Email"})]})}),e.jsx("div",{className:"space-y-4 mb-6",children:n.length===0?e.jsxs("div",{className:"bg-white p-12 rounded-lg border border-gray-200 text-center",children:[e.jsx(N,{className:"w-12 h-12 text-green-600 mx-auto mb-4"}),e.jsx("h3",{className:"text-gray-900 mb-2",children:"No Overdue Projects"}),e.jsx("p",{className:"text-gray-600",children:b!=="all"||u!=="all"?"No overdue projects found matching the current filters.":"All projects have been submitted on time!"})]}):n.map(s=>{const t=Math.floor((new Date().getTime()-new Date(s.expectedSubmissionDate).getTime())/864e5),a=m.includes(s.id),i=f.filter(o=>o.sector===s.sector&&o.department===s.department);return e.jsx("div",{className:`bg-white p-6 rounded-lg border-2 transition-all ${a?"border-blue-500 bg-blue-50":"border-gray-200"}`,children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("input",{type:"checkbox",checked:a,onChange:()=>M(s.id),className:"mt-1 w-5 h-5 text-blue-600 rounded focus:ring-2 focus:ring-blue-500"}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-gray-900 mb-1",children:s.name}),e.jsx("p",{className:"text-gray-600 text-sm mb-2",children:s.description}),e.jsxs("div",{className:"flex items-center gap-3 flex-wrap",children:[e.jsx("span",{className:"px-2 py-1 bg-blue-100 text-blue-700 rounded text-sm",children:s.sector}),e.jsx("span",{className:"px-2 py-1 bg-purple-100 text-purple-700 rounded text-sm",children:s.department}),e.jsxs("span",{className:"px-2 py-1 bg-red-100 text-red-700 rounded text-sm",children:[t," ",t===1?"day":"days"," overdue"]})]})]}),e.jsx("button",{onClick:()=>F(s.id),className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors whitespace-nowrap",children:"Mark as Submitted"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Expected Submission:"}),e.jsx("span",{className:"text-gray-900 ml-2",children:new Date(s.expectedSubmissionDate).toLocaleDateString()})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Project Status:"}),e.jsx("span",{className:"text-gray-900 ml-2 capitalize",children:s.status.replace("-"," ")})]})]}),e.jsxs("div",{className:"border-t border-gray-200 pt-4",children:[e.jsxs("div",{className:"text-sm text-gray-700 mb-2",children:["Focal Points (",i.length,"):"]}),i.length>0?e.jsx("div",{className:"flex flex-wrap gap-2",children:i.map(o=>e.jsxs("div",{className:"flex items-center gap-2 px-3 py-1 bg-gray-100 rounded text-sm",children:[e.jsx("span",{className:"text-gray-900",children:o.name}),e.jsxs("span",{className:"text-gray-600",children:["(",o.email,")"]})]},o.id))}):e.jsx("p",{className:"text-red-600 text-sm",children:"No focal points assigned to this sector/department"})]})]})]})},s.id)})}),C&&e.jsxs("div",{className:"bg-white p-6 rounded-lg border-2 border-blue-500 shadow-lg",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("h3",{className:"text-gray-900 flex items-center gap-2",children:[e.jsx(v,{className:"w-5 h-5 text-blue-600"}),"Generated Reminder Email"]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:R,className:"flex items-center gap-2 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:P?e.jsxs(e.Fragment,{children:[e.jsx(B,{className:"w-4 h-4 text-green-600"}),"Copied!"]}):e.jsxs(e.Fragment,{children:[e.jsx(U,{className:"w-4 h-4"}),"Copy to Clipboard"]})}),e.jsxs("button",{onClick:G,className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[e.jsx(v,{className:"w-4 h-4"}),"Open in Email Client"]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm text-gray-700 mb-1",children:["Recipients (",r.recipients.length,"):"]}),e.jsx("div",{className:"bg-gray-50 p-3 rounded border border-gray-200",children:r.recipients.map((s,t)=>e.jsxs("div",{className:"text-sm text-gray-900",children:[s.name," (",s.email,")",t<r.recipients.length-1&&"; "]},s.id))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-700 mb-1",children:"Subject:"}),e.jsx("div",{className:"bg-gray-50 p-3 rounded border border-gray-200",children:e.jsx("div",{className:"text-sm text-gray-900",children:r.subject})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-700 mb-1",children:"Body:"}),e.jsx("div",{className:"bg-gray-50 p-4 rounded border border-gray-200",children:e.jsx("pre",{className:"text-sm text-gray-900 whitespace-pre-wrap font-sans",children:r.body})})]})]})]})]})}export{K as Risks};
