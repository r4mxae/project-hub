import{j as e,D as d,C as y}from"./index-DKFEh9ub.js";import{u as i,w as o}from"./xlsx-DSqvgYLF.js";import{D as b}from"./download-BRujMa5i.js";import{T as j}from"./trending-up-DmgRtSIF.js";import{C as N}from"./calendar-Brd5s5Ba.js";function E({projects:m,isDarkMode:t}){const a=m.filter(s=>s.status==="completed").map(s=>({id:s.id,name:s.name,budget:s.budget,spent:s.spent,savings:s.budget-s.spent,savingsPercentage:(s.budget-s.spent)/s.budget*100,completedDate:s.submittedDate||"N/A",sector:s.sector,department:s.department})),x=a.reduce((s,l)=>s+l.budget,0),n=a.reduce((s,l)=>s+l.spent,0),g=x-n,c=x>0?g/x*100:0,h=()=>{const s=a.map(r=>({"Project Name":r.name,Sector:r.sector,Department:r.department,"Budget (AED)":r.budget,"Spent (AED)":r.spent,"Savings (AED)":r.savings,"Savings %":r.savingsPercentage.toFixed(2)+"%","Completed Date":r.completedDate}));s.push({"Project Name":"TOTAL",Sector:"",Department:"","Budget (AED)":x,"Spent (AED)":n,"Savings (AED)":g,"Savings %":c.toFixed(2)+"%","Completed Date":""});const l=i.json_to_sheet(s),p=i.book_new();i.book_append_sheet(p,l,"Savings Report"),o(p,`savings_report_${new Date().toISOString().split("T")[0]}.xlsx`)};return e.jsxs("div",{className:`p-8 ${t?"bg-gray-900":""}`,children:[e.jsxs("div",{className:"mb-8 flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:`mb-2 ${t?"text-gray-100":"text-gray-900"}`,children:"Savings Tracker"}),e.jsx("p",{className:t?"text-gray-400":"text-gray-600",children:"Track budget savings from completed projects"})]}),a.length>0&&e.jsxs("button",{onClick:h,className:"flex items-center gap-2 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors",children:[e.jsx(b,{className:"w-4 h-4"}),"Export to Excel"]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8",children:[e.jsxs("div",{className:`p-6 rounded-lg border ${t?"bg-gray-800 border-gray-700":"bg-white border-gray-200"}`,children:[e.jsx("div",{className:"flex items-center justify-between mb-4",children:e.jsx("div",{className:`p-2 rounded-lg ${t?"bg-blue-900":"bg-blue-50"}`,children:e.jsx(d,{className:"w-6 h-6 text-blue-600"})})}),e.jsxs("div",{className:`text-3xl mb-1 ${t?"text-gray-100":"text-gray-900"}`,children:["AED ",(x/1e3).toFixed(0),"k"]}),e.jsx("div",{className:`text-sm ${t?"text-gray-400":"text-gray-600"}`,children:"Total Budget"})]}),e.jsxs("div",{className:`p-6 rounded-lg border ${t?"bg-gray-800 border-gray-700":"bg-white border-gray-200"}`,children:[e.jsx("div",{className:"flex items-center justify-between mb-4",children:e.jsx("div",{className:`p-2 rounded-lg ${t?"bg-red-900":"bg-red-50"}`,children:e.jsx(j,{className:"w-6 h-6 text-red-600"})})}),e.jsxs("div",{className:`text-3xl mb-1 ${t?"text-gray-100":"text-gray-900"}`,children:["AED ",(n/1e3).toFixed(0),"k"]}),e.jsx("div",{className:`text-sm ${t?"text-gray-400":"text-gray-600"}`,children:"Total Spent"})]}),e.jsxs("div",{className:`p-6 rounded-lg border ${t?"bg-gray-800 border-gray-700":"bg-white border-gray-200"}`,children:[e.jsx("div",{className:"flex items-center justify-between mb-4",children:e.jsx("div",{className:`p-2 rounded-lg ${t?"bg-green-900":"bg-green-50"}`,children:e.jsx(d,{className:"w-6 h-6 text-green-600"})})}),e.jsxs("div",{className:`text-3xl mb-1 ${t?"text-green-400":"text-green-600"}`,children:["AED ",(g/1e3).toFixed(0),"k"]}),e.jsx("div",{className:`text-sm ${t?"text-gray-400":"text-gray-600"}`,children:"Total Savings"})]}),e.jsxs("div",{className:`p-6 rounded-lg border ${t?"bg-gray-800 border-gray-700":"bg-white border-gray-200"}`,children:[e.jsx("div",{className:"flex items-center justify-between mb-4",children:e.jsx("div",{className:`p-2 rounded-lg ${t?"bg-purple-900":"bg-purple-50"}`,children:e.jsx(y,{className:"w-6 h-6 text-purple-600"})})}),e.jsxs("div",{className:`text-3xl mb-1 ${t?"text-gray-100":"text-gray-900"}`,children:[c.toFixed(1),"%"]}),e.jsx("div",{className:`text-sm ${t?"text-gray-400":"text-gray-600"}`,children:"Savings Rate"})]})]}),a.length>0?e.jsx("div",{className:`rounded-lg border overflow-hidden ${t?"bg-gray-800 border-gray-700":"bg-white border-gray-200"}`,children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:t?"bg-gray-700":"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:`px-6 py-3 text-left text-xs uppercase tracking-wider ${t?"text-gray-300":"text-gray-700"}`,children:"Project"}),e.jsx("th",{className:`px-6 py-3 text-left text-xs uppercase tracking-wider ${t?"text-gray-300":"text-gray-700"}`,children:"Sector / Department"}),e.jsx("th",{className:`px-6 py-3 text-right text-xs uppercase tracking-wider ${t?"text-gray-300":"text-gray-700"}`,children:"Budget"}),e.jsx("th",{className:`px-6 py-3 text-right text-xs uppercase tracking-wider ${t?"text-gray-300":"text-gray-700"}`,children:"Spent"}),e.jsx("th",{className:`px-6 py-3 text-right text-xs uppercase tracking-wider ${t?"text-gray-300":"text-gray-700"}`,children:"Savings"}),e.jsx("th",{className:`px-6 py-3 text-right text-xs uppercase tracking-wider ${t?"text-gray-300":"text-gray-700"}`,children:"Savings %"}),e.jsx("th",{className:`px-6 py-3 text-left text-xs uppercase tracking-wider ${t?"text-gray-300":"text-gray-700"}`,children:"Completed"})]})}),e.jsx("tbody",{className:`divide-y ${t?"divide-gray-700":"divide-gray-200"}`,children:a.map(s=>e.jsxs("tr",{className:t?"hover:bg-gray-700":"hover:bg-gray-50",children:[e.jsx("td",{className:`px-6 py-4 ${t?"text-gray-100":"text-gray-900"}`,children:s.name}),e.jsxs("td",{className:`px-6 py-4 ${t?"text-gray-300":"text-gray-600"}`,children:[e.jsx("div",{children:s.sector}),e.jsx("div",{className:"text-sm",children:s.department})]}),e.jsxs("td",{className:`px-6 py-4 text-right ${t?"text-gray-100":"text-gray-900"}`,children:["AED ",s.budget.toLocaleString()]}),e.jsxs("td",{className:`px-6 py-4 text-right ${t?"text-gray-100":"text-gray-900"}`,children:["AED ",s.spent.toLocaleString()]}),e.jsxs("td",{className:`px-6 py-4 text-right ${s.savings>=0?"text-green-600":"text-red-600"}`,children:["AED ",s.savings.toLocaleString()]}),e.jsxs("td",{className:`px-6 py-4 text-right ${s.savingsPercentage>=0?"text-green-600":"text-red-600"}`,children:[s.savingsPercentage.toFixed(2),"%"]}),e.jsx("td",{className:`px-6 py-4 ${t?"text-gray-300":"text-gray-600"}`,children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(N,{className:"w-4 h-4"}),s.completedDate]})})]},s.id))}),e.jsx("tfoot",{className:t?"bg-gray-700":"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("td",{colSpan:2,className:`px-6 py-4 ${t?"text-gray-100":"text-gray-900"}`,children:e.jsx("strong",{children:"TOTAL"})}),e.jsx("td",{className:`px-6 py-4 text-right ${t?"text-gray-100":"text-gray-900"}`,children:e.jsxs("strong",{children:["AED ",x.toLocaleString()]})}),e.jsx("td",{className:`px-6 py-4 text-right ${t?"text-gray-100":"text-gray-900"}`,children:e.jsxs("strong",{children:["AED ",n.toLocaleString()]})}),e.jsx("td",{className:`px-6 py-4 text-right ${g>=0?"text-green-600":"text-red-600"}`,children:e.jsxs("strong",{children:["AED ",g.toLocaleString()]})}),e.jsx("td",{className:`px-6 py-4 text-right ${c>=0?"text-green-600":"text-red-600"}`,children:e.jsxs("strong",{children:[c.toFixed(2),"%"]})}),e.jsx("td",{})]})})]})})}):e.jsxs("div",{className:`p-12 text-center rounded-lg border ${t?"bg-gray-800 border-gray-700":"bg-white border-gray-200"}`,children:[e.jsx(d,{className:`w-16 h-16 mx-auto mb-4 ${t?"text-gray-600":"text-gray-400"}`}),e.jsx("h3",{className:`mb-2 ${t?"text-gray-300":"text-gray-700"}`,children:"No Savings Data Yet"}),e.jsx("p",{className:t?"text-gray-500":"text-gray-600",children:"Complete projects to start tracking your budget savings"})]})]})}export{E as Savings};
