import{c as R,r as U,j as e,U as T}from"./index-DKFEh9ub.js";import{t as P}from"./index-vYzfCZWO.js";import{C as b}from"./calendar-Brd5s5Ba.js";import{S as u}from"./square-check-big-Cnst16J9.js";import{C as L}from"./clock-CY5c905-.js";/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y=[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]],G=R("building-2",Y);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],O=R("send",H);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]],S=R("square",V);function D({procurementItems:C,focalPoints:A,isDarkMode:t}){const[l,f]=U.useState(new Set),h=new Date,N=h.getDate(),j=h.getMonth(),z=h.getFullYear(),p=j===11?0:j+1,m=j===11?z+1:z,d=U.useMemo(()=>N<24?[]:C.filter(r=>{if(r.isSubmitted||!r.recommendedPRDate||typeof r.recommendedPRDate!="string")return!1;const[a,n,s]=r.recommendedPRDate.split("-").map(Number),o=new Date(s,n-1,a);return o.getMonth()===p&&o.getFullYear()===m}).sort((r,a)=>{if(!r.recommendedPRDate||!a.recommendedPRDate)return 0;const[n,s,o]=r.recommendedPRDate.split("-").map(Number),[i,x,$]=a.recommendedPRDate.split("-").map(Number),y=new Date(o,s-1,n),v=new Date($,x-1,i);return y.getTime()-v.getTime()}),[C,N,p,m]),E=r=>{const a=new Set(l);a.has(r)?a.delete(r):a.add(r),f(a)},B=()=>{l.size===d.length?f(new Set):f(new Set(d.map(r=>r.id)))},I=()=>{const r=d.filter(n=>l.has(n.id)),a=new Map;return r.forEach(n=>{const s=`${n.sector}|${n.department}`;a.has(s)||a.set(s,[]),a.get(s).push(n)}),a},F=()=>{if(l.size===0){P.error("Please select at least one item to generate emails");return}const r=I();let a=0;r.forEach((n,s)=>{const[o,i]=s.split("|"),x=A.find(g=>g.sector===o&&g.department===i);if(!x){P.warning(`No focal point found for ${o} / ${i}`);return}const y=["January","February","March","April","May","June","July","August","September","October","November","December"][p],v=`Reminder: PR Submissions Expected in ${y} ${m} - ${o} / ${i}`;let c=`Dear ${x.name},

`;c+=`This is a friendly reminder that the following procurement requisition(s) are expected to be submitted in ${y} ${m}:

`,n.forEach((g,J)=>{c+=`${J+1}. Item ${g.item}: ${g.itemDescription}
`,c+=`   - Category: ${g.category}
`,c+=`   - Budget: AED ${g.allocatedBudget.toLocaleString()}
`,c+=`   - Expected PR Date: ${g.recommendedPRDate}
`,c+=`   - Reference: ${g.itemReference}

`}),c+=`Please ensure that the PR submission(s) are prepared and submitted on or before the expected date(s).

`,c+=`If you have any questions or concerns, please don't hesitate to reach out.

`,c+=`Best regards,
`,c+="Procurement Team";const _=`mailto:${x.email}?subject=${encodeURIComponent(v)}&body=${encodeURIComponent(c)}`;window.open(_,"_blank"),a++}),P.success(`Generated ${a} email(s) for ${r.size} focal point(s)`)},q=r=>{if(!r||typeof r!="string")return 0;const[a,n,s]=r.split("-").map(Number),o=new Date(s,n-1,a);o.setHours(0,0,0,0);const i=new Date;i.setHours(0,0,0,0);const x=o.getTime()-i.getTime();return Math.ceil(x/(1e3*60*60*24))},w=()=>["January","February","March","April","May","June","July","August","September","October","November","December"][p];return e.jsxs("div",{className:`min-h-screen p-8 ${t?"bg-gray-900":"bg-gray-50"}`,children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:`text-transparent bg-clip-text bg-gradient-to-r mb-2 ${t?"from-purple-400 to-pink-400":"from-purple-600 to-pink-600"}`,children:"Upcoming PR Submissions"}),e.jsxs("p",{className:t?"text-gray-400":"text-gray-600",children:["Projects expected in ",w()," ",m," - Available from 24th of each month"]})]}),N<24?e.jsxs("div",{className:`p-12 text-center rounded-lg border transition-all duration-200 ${t?"bg-gradient-to-br from-gray-800 to-gray-850 border-gray-700/50":"bg-white border-gray-200"}`,children:[e.jsx(b,{className:`w-16 h-16 mx-auto mb-4 ${t?"text-gray-600":"text-gray-400"}`}),e.jsx("h3",{className:`mb-2 ${t?"text-gray-300":"text-gray-700"}`,children:"Upcoming Items Available from 24th"}),e.jsx("p",{className:t?"text-gray-500":"text-gray-600",children:"The list of next month's PR submissions will be available starting from the 24th of this month."}),e.jsxs("p",{className:`mt-2 ${t?"text-gray-500":"text-gray-600"}`,children:["Current date: ",h.toLocaleDateString()]})]}):d.length===0?e.jsxs("div",{className:`p-12 text-center rounded-lg border transition-all duration-200 ${t?"bg-gradient-to-br from-gray-800 to-gray-850 border-gray-700/50":"bg-white border-gray-200"}`,children:[e.jsx(b,{className:`w-16 h-16 mx-auto mb-4 ${t?"text-gray-600":"text-gray-400"}`}),e.jsx("h3",{className:`mb-2 ${t?"text-gray-300":"text-gray-700"}`,children:"No Upcoming PR Submissions"}),e.jsxs("p",{className:t?"text-gray-500":"text-gray-600",children:["There are no procurement items expected in ",w()," ",m,"."]})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[e.jsxs("div",{className:`p-6 rounded-lg border transition-all duration-200 hover:shadow-xl ${t?"bg-gradient-to-br from-gray-800 to-gray-850 border-gray-700/50 shadow-lg shadow-gray-900/50":"bg-gradient-to-br from-white to-gray-50 border-gray-200 shadow-lg"}`,children:[e.jsx("div",{className:"flex items-center justify-between mb-4",children:e.jsx("div",{className:`p-3 rounded-xl ${t?"bg-gradient-to-br from-purple-600 to-purple-500 shadow-lg shadow-purple-500/30":"bg-gradient-to-br from-purple-600 to-purple-500 shadow-lg shadow-purple-500/20"}`,children:e.jsx(b,{className:"w-6 h-6 text-white"})})}),e.jsx("div",{className:`text-3xl mb-1 ${t?"text-gray-100":"text-gray-900"}`,children:d.length}),e.jsxs("div",{className:`text-sm ${t?"text-gray-400":"text-gray-600"}`,children:["Items Expected in ",w()]})]}),e.jsxs("div",{className:`p-6 rounded-lg border transition-all duration-200 hover:shadow-xl ${t?"bg-gradient-to-br from-gray-800 to-gray-850 border-gray-700/50 shadow-lg shadow-gray-900/50":"bg-gradient-to-br from-white to-gray-50 border-gray-200 shadow-lg"}`,children:[e.jsx("div",{className:"flex items-center justify-between mb-4",children:e.jsx("div",{className:`p-3 rounded-xl ${t?"bg-gradient-to-br from-blue-600 to-blue-500 shadow-lg shadow-blue-500/30":"bg-gradient-to-br from-blue-600 to-blue-500 shadow-lg shadow-blue-500/20"}`,children:e.jsx(u,{className:"w-6 h-6 text-white"})})}),e.jsx("div",{className:`text-3xl mb-1 ${t?"text-gray-100":"text-gray-900"}`,children:l.size}),e.jsx("div",{className:`text-sm ${t?"text-gray-400":"text-gray-600"}`,children:"Items Selected"})]}),e.jsxs("div",{className:`p-6 rounded-lg border transition-all duration-200 hover:shadow-xl ${t?"bg-gradient-to-br from-gray-800 to-gray-850 border-gray-700/50 shadow-lg shadow-gray-900/50":"bg-gradient-to-br from-white to-gray-50 border-gray-200 shadow-lg"}`,children:[e.jsx("div",{className:"flex items-center justify-between mb-4",children:e.jsx("div",{className:`p-3 rounded-xl ${t?"bg-gradient-to-br from-green-600 to-green-500 shadow-lg shadow-green-500/30":"bg-gradient-to-br from-green-600 to-green-500 shadow-lg shadow-green-500/20"}`,children:e.jsx(T,{className:"w-6 h-6 text-white"})})}),e.jsx("div",{className:`text-3xl mb-1 ${t?"text-gray-100":"text-gray-900"}`,children:I().size}),e.jsx("div",{className:`text-sm ${t?"text-gray-400":"text-gray-600"}`,children:"Focal Points to Contact"})]})]}),e.jsxs("div",{className:`p-4 rounded-lg border mb-6 flex items-center justify-between ${t?"bg-gradient-to-br from-gray-800 to-gray-850 border-gray-700/50":"bg-white border-gray-200"}`,children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("button",{onClick:B,className:`flex items-center gap-2 px-4 py-2 rounded-lg transition-all duration-200 ${t?"bg-gray-700 text-gray-200 hover:bg-gray-600":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:[l.size===d.length?e.jsx(u,{className:"w-4 h-4"}):e.jsx(S,{className:"w-4 h-4"}),l.size===d.length?"Deselect All":"Select All"]}),e.jsxs("span",{className:t?"text-gray-400":"text-gray-600",children:[l.size," of ",d.length," selected"]})]}),e.jsxs("button",{onClick:F,disabled:l.size===0,className:`flex items-center gap-2 px-4 py-2 rounded-lg transition-all duration-200 shadow-lg ${l.size===0?t?"bg-gray-700 text-gray-500 cursor-not-allowed":"bg-gray-200 text-gray-400 cursor-not-allowed":"bg-gradient-to-r from-purple-600 to-pink-600 hover:from-purple-700 hover:to-pink-700 text-white shadow-purple-500/30"}`,children:[e.jsx(O,{className:"w-4 h-4"}),"Generate Email Reminders"]})]}),e.jsx("div",{className:`rounded-lg border overflow-hidden transition-all duration-200 ${t?"bg-gradient-to-br from-gray-800 to-gray-850 border-gray-700/50":"bg-white border-gray-200"}`,children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:`border-b ${t?"bg-gray-800/50 border-gray-700":"bg-gray-50 border-gray-200"}`,children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left",children:e.jsx("button",{onClick:B,className:`transition-colors ${t?"text-gray-400 hover:text-gray-200":"text-gray-600 hover:text-gray-900"}`,children:l.size===d.length?e.jsx(u,{className:"w-5 h-5"}):e.jsx(S,{className:"w-5 h-5"})})}),e.jsx("th",{className:`px-6 py-3 text-left ${t?"text-gray-300":"text-gray-700"}`,children:"Item"}),e.jsx("th",{className:`px-6 py-3 text-left ${t?"text-gray-300":"text-gray-700"}`,children:"Description"}),e.jsx("th",{className:`px-6 py-3 text-left ${t?"text-gray-300":"text-gray-700"}`,children:"Sector / Department"}),e.jsx("th",{className:`px-6 py-3 text-left ${t?"text-gray-300":"text-gray-700"}`,children:"Category"}),e.jsx("th",{className:`px-6 py-3 text-left ${t?"text-gray-300":"text-gray-700"}`,children:"Budget (AED)"}),e.jsx("th",{className:`px-6 py-3 text-left ${t?"text-gray-300 bg-purple-900/20":"text-gray-700 bg-purple-50"}`,children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(L,{className:`w-4 h-4 ${t?"text-purple-400":"text-purple-600"}`}),e.jsx("span",{children:"Expected PR Date"})]})}),e.jsx("th",{className:`px-6 py-3 text-left ${t?"text-gray-300":"text-gray-700"}`,children:"Focal Point"})]})}),e.jsx("tbody",{className:`divide-y ${t?"divide-gray-700":"divide-gray-200"}`,children:d.map(r=>{const a=A.find(s=>s.sector===r.sector&&s.department===r.department),n=q(r.recommendedPRDate);return e.jsxs("tr",{className:`transition-colors cursor-pointer ${l.has(r.id)?t?"bg-purple-900/20":"bg-purple-50":t?"hover:bg-gray-700/30":"hover:bg-gray-50"}`,onClick:()=>E(r.id),children:[e.jsx("td",{className:"px-6 py-4",children:e.jsx("button",{onClick:s=>{s.stopPropagation(),E(r.id)},className:`transition-colors ${t?"text-gray-400 hover:text-gray-200":"text-gray-600 hover:text-gray-900"}`,children:l.has(r.id)?e.jsx(u,{className:`w-5 h-5 ${t?"text-purple-400":"text-purple-600"}`}):e.jsx(S,{className:"w-5 h-5"})})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("div",{className:t?"text-gray-200":"text-gray-900",children:r.item})}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("div",{className:`line-clamp-2 ${t?"text-gray-200":"text-gray-900"}`,children:r.itemDescription})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(G,{className:`w-4 h-4 ${t?"text-gray-500":"text-gray-400"}`}),e.jsxs("div",{children:[e.jsx("div",{className:t?"text-gray-200":"text-gray-900",children:r.sector}),e.jsx("div",{className:`text-sm ${t?"text-gray-500":"text-gray-600"}`,children:r.department})]})]})}),e.jsx("td",{className:`px-6 py-4 ${t?"text-gray-200":"text-gray-900"}`,children:r.category}),e.jsx("td",{className:`px-6 py-4 ${t?"text-gray-200":"text-gray-900"}`,children:r.allocatedBudget.toLocaleString()}),e.jsx("td",{className:`px-6 py-4 ${t?"bg-purple-900/10":"bg-purple-50"}`,children:e.jsxs("div",{className:`inline-flex flex-col gap-1 px-3 py-2 rounded-lg border ${t?"bg-purple-900/20 border-purple-700 text-purple-400":"bg-purple-100 border-purple-200 text-purple-700"}`,children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(b,{className:"w-4 h-4"}),e.jsx("span",{className:"font-semibold",children:r.recommendedPRDate})]}),e.jsxs("div",{className:"text-xs",children:[n," days away"]})]})}),e.jsx("td",{className:"px-6 py-4",children:a?e.jsxs("div",{children:[e.jsxs("div",{className:`flex items-center gap-2 ${t?"text-gray-200":"text-gray-900"}`,children:[e.jsx(T,{className:"w-4 h-4"}),a.name]}),e.jsx("div",{className:`text-sm ${t?"text-gray-500":"text-gray-600"}`,children:a.email})]}):e.jsx("span",{className:"text-gray-500",children:"No focal point assigned"})})]},r.id)})})]})})})]})]})}export{D as Upcoming};
